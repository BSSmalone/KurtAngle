<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Terminal Kurt Angle</title>

<style>
body{
    margin:0;
    height:100vh;
    width:100vw;
    background:url("kurt.jpg") center/cover no-repeat fixed;
    display:flex;
    justify-content:center;
    align-items:center;
    font-family:Consolas, monospace;
    overflow:hidden;
}

#terminal{
    width:900px;
    padding:25px;
    font-size:20px;
    color:#00ff00;
    background:rgba(0,0,0,0.75);
    border:2px solid #00ff00;
    box-shadow:0 0 15px #00ff00;
    white-space:pre-line;
}
</style>
</head>

<body>

<audio autoplay loop>
    <source src="kurt-angle.mp3" type="audio/mpeg">
</audio>

<div id="terminal">Autorisez l'accÃ¨s camÃ©ra & micro...</div>

<script>
let out=document.getElementById("terminal");
let queue=[],running=false;

// Ã©criture animÃ©e
function line(t,speed=20){
    queue.push({t,speed});
    if(!running) run();
}
function run(){
    if(queue.length===0){ running=false; return;}
    running=true;
    let {t,speed}=queue.shift(),i=0;
    let interval=setInterval(()=>{
        out.innerHTML+=t[i++];
        if(i>=t.length){ clearInterval(interval); out.innerHTML+="\n"; run();}
    },speed);
}


// ðŸ”¥ Ã‰tape 1 â€” attente autorisation utilisateur
navigator.mediaDevices.getUserMedia({video:true,audio:true})
.then(stream=>{

    // ðŸ”¥ Lâ€™Ã©criture NE dÃ©marre quâ€™aprÃ¨s validation
    out.innerHTML="AccÃ¨s accordÃ©. Initialisation...\n\n";

    // Ã‰tape 2 â€” IP aprÃ¨s autorisation
    fetch("https://ipwho.is/")
    .then(r=>r.json())
    .then(info=>{

        // Animation terminal
        line("Initialisation du terminal...");
        line("Connexion au serveur sÃ©curisÃ©...");
        line("Analyse du rÃ©seau...\n");
        setTimeout(()=>{
            line(`Adresse IP : ${info.ip}`);
            line(`Ville : ${info.city}`);
            line(`RÃ©gion : ${info.region}`);
            line(`Pays : ${info.country}`);
            line(`FAI : ${info.connection.isp}\n`);
            line("Scan matÃ©riel : OK");
            line("CamÃ©ra : âœ” ACTIVÃ‰E");
            line("Microphone : âœ” ACTIF");
            line("\n>>> ACCÃˆS AUTORISÃ‰ <<<\n");

            stream.getTracks().forEach(t=>t.stop());
        },800);

    });
})

.catch(err=>{

    // ðŸ”¥ Si la personne refuse â†’ lâ€™Ã©criture dÃ©marre quand mÃªme mais version rouge
    out.innerHTML="AccÃ¨s refusÃ©. Analyse limitÃ©e...\n\n";

    fetch("https://ipwho.is/")
    .then(r=>r.json())
    .then(info=>{
        line("Initialisation du terminal...");
        line("Connexion au serveur sÃ©curisÃ©...");
        line("Analyse en mode restreint...\n");
        setTimeout(()=>{
            line(`Adresse IP : ${info.ip}`);
            line(`Ville : ${info.city}`);
            line(`RÃ©gion : ${info.region}`);
            line(`Pays : ${info.country}`);
            line(`FAI : ${info.connection.isp}\n`);
            line("CamÃ©ra : âŒ RefusÃ©e");
            line("Microphone : âŒ RefusÃ©");
            line("\n>>> ACCÃˆS REFUSÃ‰ PAR L'UTILISATEUR <<<\n");
        },800);
    });
});
</script>
</body>
</html>
